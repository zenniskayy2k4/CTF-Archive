var WSB;(function(n){class t extends n.JsonDataProvider{constructor(n="DFLS"){super(n);this.dataSourceType=n}getName(){return this.dataSourceType=="DFLS"?"CuratedSuggestionsDataProvider":"CuratedSettingsDataProvider"}fetch(t,i,r,u){t.enabledDataSources[this.dataSourceType]&&(this.dataSourceType=="DFLS"?n.Async.safeChain("CuratedSuggestionsFetch",()=>SearchAppWrapper.CortanaApp.queryFormulationView.deviceSearch.getAllAppsAsync(),n=>i(this.dataSourceType,n,undefined),null,u):this.dataSourceType=="CUSE"&&i(this.dataSourceType,null,undefined))}}n.CuratedSuggestionsDataProvider=t;class i{constructor(n){this.dataSourceType=n!==null&&n!==void 0?n:"DFLS"}parse(n,t,i,r,u,f){let e=[];this.dataSourceType=="DFLS"?this.parseCuratedSuggestions(n,t,i,r,e):this.dataSourceType=="CUSE"&&this.parseCuratedSettings(n,t,i,r,e);f(i,e,undefined)}addSettingSuggestion(t,i,r,u,f,e,o){let h="DFLS",s=n.createSuggestion(f,r,null,{type:u==="&#xE771"?1:2,content:u},h,f.fullPartialQuery,n.InstrumentedItem.createInstrumentedItem(e,h),2,e,n.localDataSourceMayContainPII(this.dataSourceType));s.click=()=>{n.Host.launchUriAsync(i,!0),n.hasCopilotSettingEnabled()&&SearchAppWrapper.CortanaApp.dismissApp()};s.tooltip=s.text;s.reactKey=h+s.text;s.query=s.text;s.staticGroupType=o;n.isZeroInputShowPreview()&&(s.primaryMetadata=n.Host.getLocString("SystemSettingsAnnotation"),s.primaryMetadataInPreviewPane=n.Host.getLocString("SystemSettingsAnnotation"));t.push(s);s.narratorText=s.text}addAppSuggestion(t,i,r,u,f){if(i){let o=i[r];if(o){let s=n.getIcon(o,o.id+"_"+o.filePath+"_"+o.displayName,"curatedSuggestion",!0,!1,null,o.isImmersive&&o.logoBackgroundColor,0),e=n.createSuggestion(u,o.displayName,s,null,"DFLS",u.fullPartialQuery,n.InstrumentedItem.createInstrumentedItem(f,"PP"),2,f,n.localDataSourceMayContainPII(this.dataSourceType));e.deviceItem=o;e.click=()=>{n.Host.launchAppItemAsync(o,this.dataSourceType),n.hasCopilotSettingEnabled()&&SearchAppWrapper.CortanaApp.dismissApp()};e.tooltip=e.text;e.reactKey="PP"+e.text;e.query=e.text;e.staticGroupType=n.GroupType.CuratedSuggestions;e.narratorText=e.text;n.isZeroInputShowPreview()&&(e.primaryMetadata=n.Host.getLocString("App"),e.primaryMetadataInPreviewPane=n.Host.getLocString("App"));t.push(e)}}}parseCuratedSettings(t,i,r,u,f){this.addSettingSuggestion(f,"ms-settings:quiethours",n.Host.getLocString("FocusSettingSuggestion"),null,t,i,n.GroupType.CuratedSettings);this.addSettingSuggestion(f,"ms-settings:sound",n.Host.getLocString("SoundSettingsSuggestion"),null,t,i,n.GroupType.CuratedSettings);this.addSettingSuggestion(f,"ms-settings:bluetooth",n.Host.getLocString("BluetoothSettingsSuggestion"),null,t,i,n.GroupType.CuratedSettings);this.addSettingSuggestion(f,"ms-settings:display",n.Host.getLocString("DisplaySettingsSuggestion"),null,t,i,n.GroupType.CuratedSettings);this.addSettingSuggestion(f,"ms-settings:colors",n.Host.getLocString("ColorSettingsSuggestion"),null,t,i,n.GroupType.CuratedSettings);this.addSettingSuggestion(f,"ms-settings:search-permissions",n.Host.getLocString("SearchSettings"),null,t,i,n.GroupType.CuratedSettings)}parseCuratedSuggestions(t,i,r,u,f){n.config.useCobaltCSS?(this.addAppSuggestion(f,u,"MicrosoftWindows.Client.CBS_cw5n1h2txyewy!WebExperienceHost",t,i),this.addAppSuggestion(f,u,"MSEdge",t,i),this.addAppSuggestion(f,u,"Microsoft.Getstarted_8wekyb3d8bbwe!App",t,i),this.addSettingSuggestion(f,"ms-settings:emailandaccounts",n.Host.getLocString("EmailSettingSuggestion"),"&#xE715",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"Microsoft.ScreenSketch_8wekyb3d8bbwe!App",t,i),this.addSettingSuggestion(f,"ms-settings:windowsupdate",n.Host.getLocString("UpdateSettingSuggestion"),"&#xE895",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"Microsoft.Paint_8wekyb3d8bbwe!App",t,i),this.addSettingSuggestion(f,"ms-settings:themes",n.Host.getLocString("ThemeSettingSuggestion"),"&#xE771",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"Microsoft.SkyDrive.Desktop",t,i),this.addAppSuggestion(f,u,"Microsoft.WindowsCalculator_8wekyb3d8bbwe!App",t,i),this.addSettingSuggestion(f,"ms-settings:bluetooth",n.Host.getLocString("BluetoothSettingSuggestion"),"&#xE772",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"microsoft.windowscommunicationsapps_8wekyb3d8bbwe!microsoft.windowslive.mail",t,i),this.addAppSuggestion(f,u,"Microsoft.Windows.Explorer",t,i)):(this.addAppSuggestion(f,u,"MSEdge",t,i),this.addAppSuggestion(f,u,"Microsoft.Getstarted_8wekyb3d8bbwe!App",t,i),this.addSettingSuggestion(f,"ms-settings:emailandaccounts",n.Host.getLocString("EmailSettingSuggestion"),"&#xE715",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"{1AC14E77-02E7-4E5D-B744-2EB1AE5198B7}\\SnippingTool.exe",t,i),this.addSettingSuggestion(f,"ms-settings:windowsupdate",n.Host.getLocString("UpdateSettingSuggestion"),"&#xE895",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"Microsoft.Windows.Computer",t,i),this.addAppSuggestion(f,u,"{1AC14E77-02E7-4E5D-B744-2EB1AE5198B7}\\mspaint.exe",t,i),this.addSettingSuggestion(f,"ms-settings:themes",n.Host.getLocString("ThemeSettingSuggestion"),"&#xE771",t,i,n.GroupType.CuratedSuggestions),this.addAppSuggestion(f,u,"Microsoft.SkyDrive.Desktop",t,i),this.addAppSuggestion(f,u,"{1AC14E77-02E7-4E5D-B744-2EB1AE5198B7}\\notepad.exe",t,i),this.addAppSuggestion(f,u,"Microsoft.Windows.Explorer",t,i),this.addAppSuggestion(f,u,"Microsoft.GetHelp_8wekyb3d8bbwe!App",t,i),this.addAppSuggestion(f,u,"microsoft.windowscommunicationsapps_8wekyb3d8bbwe!microsoft.windowslive.mail",t,i),this.addAppSuggestion(f,u,"windows.immersivecontrolpanel_cw5n1h2txyewy!microsoft.windows.immersivecontrolpanel",t,i))}}n.CuratedSuggestionsParser=i})(WSB||(WSB={})),function(n){const i="QSCH";class r extends n.JsonDataProvider{getName(){return"QuickSearchSuggestionsDataProvider"}constructor(){super("QSCH");this._lastTypedQuery=new u;(n.TestHookUrlParameters===null||n.TestHookUrlParameters===void 0?void 0:n.TestHookUrlParameters.mockLastQuery)&&this._lastTypedQuery.setQuery(n.TestHookUrlParameters.mockLastQuery);n.Host.bindDismissed(n=>{n&&n.queryToFetch&&this._lastTypedQuery.setQuery(n.fullPartialQuery)})}fetch(n,t){if(n.enabledDataSources[i]){let u={};u=r.getQuickSearchResponse(u);t(i,u,undefined)}}static getQuickSearchResponse(t){let r=n.ScopeConfig[n.Scope.Web]&&n.ScopeConfig[n.Scope.Web].prefixes?n.ScopeConfig[n.Scope.Web].prefixes[0]:null,i=n.Host.getLanguage().toLowerCase();return n.shouldEnableQuickSearches(i)&&this.getQuickAnswers(i,r,t),t}static getQuickAnswers(t,i,r){let u=[];r.quickAnswers=n.getQuickAnswersTranslatedSuggestions(t);r.quickAnswers.forEach(n=>{i?u.push(i.toLowerCase()+": "+n.query):u.push(n.query)})}}n.QuickSearchSuggestionsDataProvider=r;class u{constructor(){this.LastTypedQueryTTLms=6e5}getQuery(){const t=n.getCurrentTime();return this._lastTypedQueryTimeStamp&&t-this._lastTypedQueryTimeStamp<this.LastTypedQueryTTLms?this._lastTypedQuery:(this._lastTypedQuery=null,this._lastTypedQueryTimeStamp=null,null)}setQuery(t){this._lastTypedQuery=t;this._lastTypedQueryTimeStamp=n.getCurrentTime()}}class t{constructor(n){this._navigationHelper=n;t.navigationHelper=this._navigationHelper}parse(n,i,r,u,f,e){let o=[];t.parseQuickSearchSuggestions(n,i,r,u,o);e(r,o,undefined)}static parseQuickSearchSuggestions(i,r,u,f,e){let o=n.ScopeConfig[n.Scope.Web]&&n.ScopeConfig[n.Scope.Web].prefixes?n.ScopeConfig[n.Scope.Web].prefixes[0]:null;if(f&&f.resumeSearchQuery){let o="RSSG",t=n.createSuggestion(i,n.Host.getLocString("RedoLastSearch"),null,{type:2,content:"&#xE81C"},o,f.resumeSearchQuery,n.InstrumentedItem.createInstrumentedItemForReformulation(r,o),998,r,n.localDataSourceMayContainPII(u)),s={verb:"RemoveFromDeviceHistory",displayName:n.Host.getLocString("RemoveFromDeviceHistory"),executeSync:f.resumeSearchRemoveAction,icon:{content:"&#xE711",type:2}};t.tooltip=n.Host.getLocString("RedoYourLastSearchTooltip",f.resumeSearchQuery);n.setExtraVerbs(t,()=>[s],!1);t.click=()=>{n.Host.reformulate(f.resumeSearchQuery),n.Host.setFocusInSearchBox(null,`${o}.click`)};t.reactKey=o+f.resumeSearchQuery;e.push(t)}if(f&&f.quickAnswers){let s="QSSG";for(let h of f.quickAnswers){let c=n.config.quickSearchToMsnMarkets[n.getCurrentLanguage()]&&h.msnUrl,l=n.config.quickSearchToEdge||c,f=n.createSuggestion(i,h.text?h.text:h.query,null,n.config.quickAnswerWeb?{type:2,content:"&#xE721"}:h.icon,s,h.query,l?n.InstrumentedItem.createInstrumentedItem(r,s):n.InstrumentedItem.createInstrumentedItemForReformulation(r,s),l?c?20:0:998,r,n.localDataSourceMayContainPII(u));f.tooltip=c?h.msnTooltip:h.tooltip;f.click=()=>{if(c)n.shouldLaunchSuggWithDefaultBrowser()?n.Host.launchUrlWithDefaultBrowserAsync(h.msnUrl):n.Host.launchUriAsync(h.msnUrl);else if(l)n.shouldLaunchSuggWithDefaultBrowser()?n.Host.launchUrlWithDefaultBrowserAsync(t.navigationHelper.getSearchUrl(h.query,h.query,"SW",null,0)):n.Host.launchSearchAsync(h.query,t.navigationHelper.getSearchUrl(h.query,h.query,"SW",null,0),f.useRaf);else{let t=h.query;o&&(t=o.toLowerCase()+": "+t);n.Host.reformulateOnSuggestionClick(t,i.isSearchHomeZI,s,h.serpURLParams);n.Host.setFocusInSearchBox(null,`${s}.click`)}};f.reactKey=s+h.query;e.push(f)}}}}n.QuickSearchSuggestionsParser=t}(WSB||(WSB={}))