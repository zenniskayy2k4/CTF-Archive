<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registered Devices</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">

    {{#devices}}
        <h1 class="text-center mb-4">Registered Devices</h1>
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Device {{@index}}</h5>

                <form action="/devices/update" method="POST" class="mb-3">
                    <input type="hidden" name="id" value="{{@index}}">
                    <div class="form-group">
                        <label for="name-{{@index}}">Device Name</label>
                        <input type="text" id="name-{{@index}}" name="name" class="form-control" value="{{name}}"
                               required>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Name</button>
                </form>

                <p><strong>IP Address:</strong> {{#ipAddress}}{{ipAddress}}{{/ipAddress}}{{^ipAddress}}
                    None{{/ipAddress}}</p>
                <p><strong>MAC Address:</strong> {{macAddress}}</p>
                <p><strong>Type:</strong> {{type}}</p>

                {{#isDesktop}}
                    <form action="/devices/update" method="POST" class="mt-3">
                        <input type="hidden" name="id" value="{{@index}}">
                        <div class="form-group">
                            <label for="location-{{@index}}">Location</label>
                            <input type="text" id="location-{{@index}}" name="location" class="form-control"
                                   value="{{location}}">
                        </div>
                        <button type="submit" class="btn btn-secondary">Update Location</button>
                    </form>
                {{/isDesktop}}

            </div>
        </div>
    {{/devices}}
    {{^devices}}
        <h1 class="text-center mb-4">No Registered Devices</h1>
    {{/devices}}
    <hr>
    <h1 class="text-center mb-4">Add New Device</h1>
    <form action="/devices/add" method="POST" class="mb-5">
        <div class="form-group">
            <label for="name">Device Name</label>
            <input type="text" id="name" name="name" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="ip">IP Address (optional)</label>
            <input type="text" id="ip" name="ip" class="form-control">
        </div>

        <div class="form-group">
            <label for="mac">MAC Address</label>
            <input type="text" id="mac" name="mac" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="type">Device Type</label>
            <select id="type" name="type" class="form-control" required>
                <option value="Other" selected>Other</option>
                <option value="Laptop">Laptop</option>
                <option value="Phone">Phone</option>
                <option value="Desktop">Desktop</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success">Add Device</button>
    </form>

</div>

</body>
</html>
